{# templates/partials/sidebar.html #}

<nav class="rw-sidebar-nav">
  <ul class="nav flex-column px-2 py-1 gap-1">

    <!-- Dashboard -->
    <li class="nav-item">
      <a class="nav-link" href="{% url 'accounts:dashboard' %}">
        <i class="bi bi-speedometer2 me-2"></i>
        Dashboard
      </a>
    </li>

    <!-- Projects -->
    <li class="nav-item">
      <a class="nav-link" href="{% url 'accounts:project_config_list' %}">
        <i class="bi bi-folder me-2"></i>
        Projects
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link !bg-blue-400 !text-white rounded px-3 py-2 fw-semibold" href="{% url 'accounts:project_create' %}">
        +Project
      </a>
    </li>

    <!-- Chats -->
    <li class="nav-item">
      <a class="nav-link" href="{% url 'accounts:chat_browse' %}">
        <i class="bi bi-chat-left-text me-2"></i>
        Chats
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link !bg-blue-400 !text-white rounded px-3 py-2 fw-semibold"
         href="{% url 'accounts:chat_create' %}{% if active_project %}?project={{ active_project.id }}{% endif %}">
        +Chat
      </a>
    </li>

    <!-- Active chat -->
    {% with cid=request.session.rw_active_chat_id %}
      {% if cid %}
        <li class="nav-item">
          <a class="nav-link" href="{% url 'accounts:chat_detail' cid %}">
            <i class="bi bi-chat-dots me-2"></i>
            Active
          </a>
        </li>
      {% else %}
        <li class="nav-item">
          <span class="nav-link text-secondary disabled">
            <i class="bi bi-chat-dots me-2"></i>
            No chat selected
          </span>
        </li>
      {% endif %}
    {% endwith %}

    <!-- Settings -->
    <li class="nav-item">
      <a class="nav-link" href="{% url 'accounts:config_menu' %}">
        <i class="bi bi-sliders me-2"></i>
        Settings
      </a>
    </li>

    {% if request.user.is_superuser %}
    <li class="nav-item mt-2">
      <div class="nav-link text-secondary small">
        Admin
      </div>
    </li>

    <li class="nav-item">
      <a class="nav-link" href="/admin/">
        <i class="bi bi-shield-lock me-2"></i>
        Django
      </a>
    </li>

    <li class="nav-item">
      <a class="nav-link" href="/admin/projects/phasecontract/">
        <i class="bi bi-file-text me-2"></i>
        Contracts
      </a>
    </li>

    <li class="nav-item">
      <a class="nav-link" href="{% url 'accounts:admin_hub' %}">
        <i class="bi bi-tools me-2"></i>
        Workbench
      </a>
    </li>
    {% endif %}

  </ul>
</nav>
